(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["about"],{1:function(t,e){},e170:function(t,e,s){},ee79:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"chat-all-con"},[s("section",{staticClass:"chat-container"},[s("header",{staticClass:"header"},[t._v(t._s(t.userInfo.username)+" 的聊天室")]),s("main",{staticClass:"main"},[s("article",{staticClass:"article"},[s("section",{staticClass:"top"},[s("p",{staticClass:"join-time"},[t._v("加入时间："+t._s(t.userInfo.time))]),s("ul",{ref:"zoom",staticClass:"zoom-wrap",attrs:{id:"zoom"}},t._l(t.list,(function(e,a){return s("li",{key:a,staticClass:"piece",style:{"justify-content":"left"==e.side?"":"flex-end"}},[s("figure",{staticClass:"figure",style:{order:"left"==e.side?"0":"2"}},[s("img",{staticClass:"avatar",attrs:{src:e.avatar,alt:""}})]),s("section",{staticClass:"piece_main"},[s("p",{staticClass:"name",style:{"text-align":"left"==e.side?"":"right"}},[t._v(" "+t._s(e.owner)+" ")]),"image"==e.type?s("img",{staticClass:"image",attrs:{src:e.url}}):s("p",{staticClass:"content",style:{color:e.textColor}},[t._v(" "+t._s(e.message)+" ")])])])})),0)]),s("footer",{staticClass:"footer",on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.send(e)}}},[s("section",{staticClass:"operate-bar"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.textColor,expression:"textColor"}],staticClass:"color",attrs:{type:"color"},domProps:{value:t.textColor},on:{change:t.chooseColor,input:function(e){e.target.composing||(t.textColor=e.target.value)}}}),s("i",{staticClass:"el-icon-picture image",on:{click:t.selectFile}}),s("input",{ref:"file",staticStyle:{display:"none"},attrs:{type:"file"},on:{change:t.changeFile}})]),s("section",[s("el-input",{staticClass:"textarea",style:{color:t.textColor},attrs:{type:"textarea"},model:{value:t.answer,callback:function(e){t.answer="string"===typeof e?e.trim():e},expression:"answer"}}),s("aside",{staticClass:"send-wrap"},[s("el-button",[t._v("关闭")]),s("el-button",{on:{click:t.send}},[t._v("发送")])],1)],1)])]),s("aside",{staticClass:"aside"},[s("p",{staticClass:"summary"},[t._v("在线人员("+t._s(t.onlineList.length)+")")]),s("ul",{staticClass:"list"},t._l(t.onlineList,(function(e,a){return s("li",{key:a,staticClass:"piece"},[s("figure",{staticClass:"figure"},[s("img",{staticClass:"avatar",attrs:{src:e.avatar,alt:""}})]),s("p",{staticClass:"username"},[t._v(t._s(e.username))])])})),0)])])])])},n=[],i=(s("b4fb"),s("e292")),o=s("ef27"),l=s.n(o),r={data:function(){return{url:"ws://175.24.90.8:3101",ws:null,username:"",list:[],answer:"",userInfo:{},onlineList:[],textColor:"#000000"}},created:function(){this.username=this.$route.query.username,this.connect()},beforeDestroy:function(){this.ws.close(),this.ws.disconnect(),this.ws.emit("disconnect")},methods:{connect:function(){var t=this;this.ws=l()(this.url),this.ws.on("connect",(function(){t.ws.emit("join",{username:t.username,time:new Date})})),this.ws.on("joinResult",(function(e){t.userInfo=e})),this.ws.on("message",(function(e){t.list=[].concat(Object(i["a"])(t.list),[e])})),this.ws.on("displayUser",(function(e,s){t.onlineList=e,s&&t.$message("欢迎".concat(s.username,"加入聊天室"))}))},send:function(){var t=this;this.answer&&this.ws.emit("message",{message:this.answer,time:(new Date).toLocaleString(),owner:this.username,avatar:this.userInfo.avatar,type:"text",textColor:this.textColor},(function(e){e&&(t.list=[].concat(Object(i["a"])(t.list),[e]),t.answer="",t.$nextTick((function(){t.scrollToBottom()})))}))},scrollToBottom:function(){var t=document.querySelector("#zoom"),e=t.children.length,s=t.children[e-1];s.scrollIntoView()},chooseColor:function(t){console.log(t.target.value,this.textColor)},changeFile:function(t){var e=this,s=t.target.files[0],a=new FileReader;a.onload=function(){e.ws.emit("message",{time:(new Date).toLocaleString(),owner:e.username,avatar:e.userInfo.avatar,type:"image",url:a.result},(function(t){t&&(e.list=[].concat(Object(i["a"])(e.list),[t]))}))},a.readAsDataURL(s)},selectFile:function(){this.$refs.file.click()}}},c=r,u=(s("fb8b"),s("9ca4")),f=Object(u["a"])(c,a,n,!1,null,"62bfd7d0",null);e["default"]=f.exports},fb8b:function(t,e,s){"use strict";var a=s("e170"),n=s.n(a);n.a}}]);
//# sourceMappingURL=about.js.map